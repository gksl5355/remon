-- =========================================
-- ENUM TYPES (idempotent)
-- =========================================
DO $$
BEGIN
  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'product_category_enum') THEN
    CREATE TYPE product_category_enum AS ENUM ('combustible', 'htp', 'e_cigarette');
  END IF;

  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'risk_level_enum') THEN
    CREATE TYPE risk_level_enum AS ENUM ('LOW', 'MEDIUM', 'HIGH');
  END IF;

  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'change_type_enum') THEN
    CREATE TYPE change_type_enum AS ENUM ('none', 'append', 'new', 'repeal');
  END IF;
END$$;
-- =========================================
-- TABLES
-- =========================================

-- Admin users
CREATE TABLE IF NOT EXISTS admin_users (
  admin_user_id   SERIAL PRIMARY KEY,
  username        varchar(50) UNIQUE NOT NULL,
  password        varchar(50) NOT NULL
);

-- Countries
CREATE TABLE IF NOT EXISTS countries (
  country_code    char(2) PRIMARY KEY,    -- KR, US
  country_name    varchar(100)
);

-- Products
CREATE TABLE IF NOT EXISTS products ( 
	product_id SERIAL GENERATED BY DEFAULT AS IDENTITY PRIMARY key,
	product_name varchar(50), 
	product_category product_category_enum, 
	manufactured_at timestamp DEFAULT now(), 
	nicotin varchar(20) not null, 
	tarr varchar(20) not null, 
	menthol boolean,
	incense boolean,
	battery varchar(20) not null, 
	label_size varchar(20),
	image text,
	Security_auth boolean,
	Revenue int
);
-- Product export countries (scope for map)
CREATE TABLE IF NOT EXISTS product_export_countries (
  product_id      SERIAL NOT NULL,
  country_code    char(2) NOT NULL,
  note            varchar(200),
  CONSTRAINT product_export_countries_pk PRIMARY KEY (product_id, country_code)
);

-- Glossary terms
CREATE TABLE IF NOT EXISTS glossary_terms (
  glossary_term_id    SERIAL PRIMARY KEY,
  canonical_key       varchar(100),     -- e.g., nicotine_limit
  language_code       varchar(10),      -- KO, EN, RU ...
  definition          text,
  synonyms            varchar(300),     -- comma-separated
  mistranslations     varchar(300),     -- optional, translation caveats
  legal_terms         varchar(300),     -- original/local legal term
  created_at          timestamp DEFAULT now(),
  updated_at          timestamp,
  CONSTRAINT uq_glossary_canonical_lang UNIQUE (canonical_key, language_code)
);

-- Data sources
CREATE TABLE IF NOT EXISTS data_sources (
  source_id       SERIAL PRIMARY KEY,
  source_name     varchar(150),
  url             varchar(500),
  source_type     varchar(20)           -- rss, html, api, pdf
);

-- Crawl jobs
CREATE TABLE IF NOT EXISTS crawl_jobs (
  job_id          SERIAL PRIMARY KEY,
  job_name        varchar(150),
  schedule_rule   varchar(100),         -- cron/rate
  is_active       boolean DEFAULT true
);

-- Crawl logs
CREATE TABLE IF NOT EXISTS crawl_logs (
  log_id          SERIAL PRIMARY KEY,
  job_id          integer,
  source_id       integer,
  status          varchar(10),          -- success, failed
  created_at      timestamp DEFAULT now()
);

-- Regulations
CREATE TABLE IF NOT EXISTS regulations (
  regulation_id   SERIAL PRIMARY KEY,
  source_id       integer NOT NULL,
  country_code    char(2) NOT NULL,
  external_id     varchar(200),
  title           varchar(100),
  proclaimed_date date,
  effective_date  date,
  language        varchar(10),
  status          varchar(20),          -- active, repealed
  created_at      timestamp DEFAULT now()
  -- Note: content changes are versioned by regulation_versions
);

-- Regulation versions
CREATE TABLE IF NOT EXISTS regulation_versions (
  regulation_version_id  SERIAL PRIMARY KEY,
  regulation_id          integer NOT NULL,
  version_number         integer NOT NULL,
  original_uri           varchar(500),
  hash_value             varchar(128),
  created_at             timestamp DEFAULT now()
);

-- Change keynotes (product/country-scoped TOP items)
CREATE TABLE IF NOT EXISTS regulation_change_keynotes (
  keynote_id             SERIAL PRIMARY KEY,
  product_id             integer NOT NULL,
  country_code           char(2) NOT NULL,
  regulation_version_id  integer NOT NULL,
  impact_score_id        integer NOT NULL,
  translation_id         integer NOT NULL,
  title                  varchar(100),
  regulation_type        varchar(50),
  generated_at           timestamp DEFAULT now()
);

-- Regulation translations
CREATE TABLE IF NOT EXISTS regulation_translations (
  translation_id         SERIAL PRIMARY KEY,
  regulation_version_id  integer NOT NULL,
  language_code          varchar(10),      -- KO, EN...
  translated_text        text,
  glossary_term_id       uuid,
  translation_status     varchar(20),
  created_at             timestamp DEFAULT now(),
  CONSTRAINT uq_regulation_trans_lang UNIQUE (regulation_version_id, language_code)
);

-- Regulation change history
CREATE TABLE IF NOT EXISTS regulation_change_history (
  change_id              SERIAL PRIMARY KEY,
  regulation_version_id  integer NOT NULL,
  change_type            change_type_enum, -- none, append, new, repeal
  change_summary         text,
  detected_at            timestamp DEFAULT now()
);

-- Impact scores (per product)
CREATE TABLE IF NOT EXISTS impact_scores (
  impact_score_id    SERIAL PRIMARY KEY,
  translation_id     integer NOT NULL,
  product_id         integer NOT NULL,
  impact_score       numeric(4,3),        -- 0.000 ~ 1.000
  risk_level         risk_level_enum,     -- low/medium/high
  evaluation_detail  text,                -- rationale
  evaluated_at       timestamp DEFAULT now(),
  CONSTRAINT uq_impact_translation_product UNIQUE (translation_id, product_id)
);

-- Reports
CREATE TABLE IF NOT EXISTS reports (
  report_id        SERIAL PRIMARY KEY,
  created_reason   varchar(30),           -- recommend 'change_detected'
  created_at       timestamp DEFAULT now(),
  file_path        varchar(500),
  translation_id   integer NOT NULL,
  change_id        integer,
  product_id       integer,
  country_code     char(2) NOT NULL
);

-- Report items
CREATE TABLE IF NOT EXISTS report_items (
  item_id               SERIAL PRIMARY KEY,
  report_id             integer NOT NULL,
  regulation_version_id integer,
  impact_score_id       integer,
  order_no              integer GENERATED BY DEFAULT AS IDENTITY
);

-- Report summaries (3-line summary etc.)
CREATE TABLE IF NOT EXISTS report_summaries (
  summary_id       SERIAL PRIMARY KEY,
  report_id        integer NOT NULL,
  impact_score_id  integer NOT NULL,
  summary_text     JSONB NOT NULL,
  created_at       timestamp DEFAULT now()
);

-- =========================================
-- FOREIGN KEYS
-- =========================================

-- product_export_countries
ALTER TABLE product_export_countries
  ADD CONSTRAINT fk_pec_product  FOREIGN KEY (product_id)   REFERENCES products(product_id),
  ADD CONSTRAINT fk_pec_country  FOREIGN KEY (country_code) REFERENCES countries(country_code);

-- crawl_logs
ALTER TABLE crawl_logs
  ADD CONSTRAINT fk_crawl_logs_job    FOREIGN KEY (job_id)    REFERENCES crawl_jobs(job_id),
  ADD CONSTRAINT fk_crawl_logs_source FOREIGN KEY (source_id) REFERENCES data_sources(source_id);

-- regulations
ALTER TABLE regulations
  ADD CONSTRAINT fk_regulations_source  FOREIGN KEY (source_id)   REFERENCES data_sources(source_id),
  ADD CONSTRAINT fk_regulations_country FOREIGN KEY (country_code) REFERENCES countries(country_code);

-- regulation_versions
ALTER TABLE regulation_versions
  ADD CONSTRAINT fk_reg_version_reg FOREIGN KEY (regulation_id) REFERENCES regulations(regulation_id);

-- regulation_translations
ALTER TABLE regulation_translations
  ADD CONSTRAINT fk_reg_trans_version  FOREIGN KEY (regulation_version_id) REFERENCES regulation_versions(regulation_version_id),
  ADD CONSTRAINT fk_reg_trans_glossary FOREIGN KEY (glossary_term_id)      REFERENCES glossary_terms(glossary_term_id);

-- regulation_change_history
ALTER TABLE regulation_change_history
  ADD CONSTRAINT fk_change_hist_version FOREIGN KEY (regulation_version_id) REFERENCES regulation_versions(regulation_version_id);

-- impact_scores
ALTER TABLE impact_scores
  ADD CONSTRAINT fk_impact_translation FOREIGN KEY (translation_id) REFERENCES regulation_translations(translation_id),
  ADD CONSTRAINT fk_impact_product     FOREIGN KEY (product_id)     REFERENCES products(product_id);

-- regulation_change_keynotes
ALTER TABLE regulation_change_keynotes
  ADD CONSTRAINT fk_keynotes_product       FOREIGN KEY (product_id)            REFERENCES products(product_id),
  ADD CONSTRAINT fk_keynotes_country       FOREIGN KEY (country_code)          REFERENCES countries(country_code),
  ADD CONSTRAINT fk_keynotes_version       FOREIGN KEY (regulation_version_id) REFERENCES regulation_versions(regulation_version_id),
  ADD CONSTRAINT fk_keynotes_impact        FOREIGN KEY (impact_score_id)       REFERENCES impact_scores(impact_score_id),
  ADD CONSTRAINT fk_keynotes_translation   FOREIGN KEY (translation_id)        REFERENCES regulation_translations(translation_id);

-- reports
ALTER TABLE reports
  ADD CONSTRAINT fk_reports_translation FOREIGN KEY (translation_id) REFERENCES regulation_translations(translation_id),
  ADD CONSTRAINT fk_reports_change      FOREIGN KEY (change_id)      REFERENCES regulation_change_history(change_id),
  ADD CONSTRAINT fk_reports_product     FOREIGN KEY (product_id)     REFERENCES products(product_id),
  ADD CONSTRAINT fk_reports_country     FOREIGN KEY (country_code)   REFERENCES countries(country_code);

-- report_items
ALTER TABLE report_items
  ADD CONSTRAINT fk_report_items_report    FOREIGN KEY (report_id)             REFERENCES reports(report_id),
  ADD CONSTRAINT fk_report_items_version   FOREIGN KEY (regulation_version_id) REFERENCES regulation_versions(regulation_version_id),
  ADD CONSTRAINT fk_report_items_impact    FOREIGN KEY (impact_score_id)       REFERENCES impact_scores(impact_score_id);

-- report_summaries
ALTER TABLE report_summaries
  ADD CONSTRAINT fk_report_summaries_report FOREIGN KEY (report_id)      REFERENCES reports(report_id),
  ADD CONSTRAINT fk_report_summaries_impact FOREIGN KEY (impact_score_id) REFERENCES impact_scores(impact_score_id);

-- =========================================
-- (Optional) Helpful indexes — 주석 해제하여 사용
-- =========================================
-- CREATE INDEX IF NOT EXISTS idx_regulations_country ON regulations(country_code);
-- CREATE INDEX IF NOT EXISTS idx_reg_versions_reg     ON regulation_versions(regulation_id);
-- CREATE INDEX IF NOT EXISTS idx_keynotes_prod_ctry   ON regulation_change_keynotes(product_id, country_code);
-- CREATE INDEX IF NOT EXISTS idx_impact_product       ON impact_scores(product_id);
-- CREATE INDEX IF NOT EXISTS idx_reports_country      ON reports(country_code);


-- 데미데이터 모음 (위에서 순차적으로 실행할것을 권장)
---- 1. 국가 데이터
INSERT INTO countries (country_code, country_name) VALUES
--('KR', 'South Korea'),
('US', 'United States');
--('JP', 'Japan'),
--('CN', 'China'),
--('GB', 'United Kingdom'),
--('DE', 'Germany'),
--('FR', 'France'),
--('AU', 'Australia'),
--('CA', 'Canada'),
--('RU', 'Russia');

-- 2. 
INSERT INTO data_sources (source_id, source_name) VALUES (1, 'Manual Upload');
--
--3. regulations
INSERT INTO regulations (regulation_id, source_id, country_code, title, status) 
VALUES 
  (1, 1, 'US', 'US 니코틴 규제', 'active'),
  (2, 1, 'US', 'US 광고 규제', 'active');
--
-- 4. regulation_versions (regulations의 버전)
INSERT INTO regulation_versions (regulation_version_id, regulation_id, version_number)
VALUES (1, 1, 1),
(2, 1, 1);
--

-- 5. regulation_translations (번역본)
INSERT INTO regulation_translations (translation_id, regulation_version_id, language_code, translated_text, created_at)
VALUES 
  (1, 1, 'KO', 'US 니코틴 함량 표기 기준 강화 번역본', NOW()),
  (2, 2, 'KO', 'US 전자담배 광고 규제 완화 번역본', NOW());

-- 6. regulation_change_history (변경 이력)
INSERT INTO regulation_change_history (change_id, regulation_version_id, change_type, change_summary)
VALUES (1, 1, 'new', '신규 규제');
--
-- 7. products (제품)
INSERT INTO products 
(product_name, product_category, manufactured_at, nicotin, tarr, menthol, incense, battery, label_size, image, security_auth, Revenue)
VALUES
('Marlboro Red', 'combustible', now(), '0.8mg', '8.0mg', false, false, 'N/A', '50x70mm', 'text', true,200),
('Camel Blue', 'combustible', now(), '0.7mg', '7.0mg', false, false, 'N/A', '50x65mm', 'text', true,150),
('IQOS Iluma One', 'htp', now(), '1.0mg', 'N/A', true, false, '18650', '40x50mm', 'text', true,250),
('Glo Hyper X2', 'htp', now(), '1.2mg', 'N/A', true, false, '18650', '38x48mm', 'text', true,180),
('Elf Bar 5000', 'e_cigarette', now(), '5%', 'N/A', false, true, 'built-in', '30x40mm', 'text', false,220);
--
-- 8. reports (리포트)
INSERT INTO reports (report_id, translation_id, change_id, product_id, country_code, created_reason)
VALUES (1, 1, 1, 1, 'US', 'change_detected');

-- 9.impact_scores (영향도 점수)
INSERT INTO impact_scores (impact_score_id, translation_id, product_id, impact_score, risk_level, evaluated_at)
VALUES 
  (1, 1, 1, 0.850, 'HIGH', NOW()),
  (2, 2, 1, 0.500, 'MEDIUM', NOW());
--  (3, 3, 1, 0.300, 'low', NOW());

-- 10. regulation_change_keynotes
INSERT INTO regulation_change_keynotes (
  keynote_id, 
  product_id, 
  country_code, 
  regulation_version_id, 
  impact_score_id, 
  translation_id, 
  title, 
  regulation_type, 
  generated_at
)
values
  (1, 1, 'US', 1, 1, 1, 'US 광고 규제 완화', '광고 규제', NOW()),
  (2, 1, 'US', 2, 2, 2, 'US 니코틴 규제 강화', '라벨 표시', NOW());


--select * from regulation_change_keynotes rck ;
-- 제품 데이터 향 여부, 맨솔 여부, 라벨사이즈, 경고문구 이미지, 위치, 인증코드 유무
INSERT INTO products 
(product_name, product_category, manufactured_at, nicotin, tarr, menthol, incense, battery, label_size, image, security_auth, Revenue)
VALUES
('Marlboro Red', 'combustible', now(), '0.8mg', '8.0mg', false, false, 'N/A', '50x70mm', 'text', true,200)
('Camel Blue', 'combustible', now(), '0.7mg', '7.0mg', false, false, 'N/A', '50x65mm', 'text', true,150),
('IQOS Iluma One', 'htp', now(), '1.0mg', 'N/A', true, false, '18650', '40x50mm', 'text', true,250),
('Glo Hyper X2', 'htp', now(), '1.2mg', 'N/A', true, false, '18650', '38x48mm', 'text', true,180),
('Elf Bar 5000', 'e_cigarette', now(), '5%', 'N/A', false, true, 'built-in', '30x40mm', 'text', false,220)
--;

---- regulations 테이블 더미 데이터 (미국만, 50개)
--INSERT INTO regulations (regulation_id, source_id, country_code, external_id, title, proclaimed_date, effective_date, language, status, created_at) VALUES
--(1, 1, 'US', 'US-FDA-2023-001', 'Flavored Tobacco Product Ban', '2023-01-15', '2023-04-01', 'EN', 'active', '2023-01-15 09:00:00'),
--(2, 1, 'US', 'US-FDA-2023-002', 'Menthol Cigarette Prohibition', '2023-01-20', '2023-05-01', 'EN', 'active', '2023-01-20 10:30:00'),
--(3, 1, 'US', 'US-FDA-2023-003', 'E-Cigarette Marketing Restrictions', '2023-02-10', '2023-04-15', 'EN', 'active', '2023-02-10 11:00:00'),
--(4, 1, 'US', 'US-FDA-2023-004', 'Tobacco Product Ingredient Disclosure', '2023-02-25', '2023-05-15', 'EN', 'active', '2023-02-25 14:30:00');
--(5, 1, 'US', 'US-FDA-2023-005', 'Nicotine Content Maximum Limit', '2023-03-05', '2023-06-01', 'EN', 'active', '2023-03-05 09:15:00'),
--(6, 1, 'US', 'US-FDA-2023-006', 'Tobacco Packaging Warning Update', '2023-03-20', '2023-06-15', 'EN', 'active', '2023-03-20 10:00:00'),
--(7, 1, 'US', 'US-FDA-2023-007', 'Youth Tobacco Access Prevention', '2023-04-10', '2023-07-01', 'EN', 'active', '2023-04-10 13:45:00'),
--(8, 1, 'US', 'US-FDA-2023-008', 'Tobacco Retailer Registration', '2023-04-25', '2023-07-15', 'EN', 'active', '2023-04-25 08:30:00'),
--(9, 1, 'US', 'US-FDA-2023-009', 'Heated Tobacco Product Standards', '2023-05-15', '2023-08-01', 'EN', 'active', '2023-05-15 11:20:00'),
--(10, 1, 'US', 'US-FDA-2023-010', 'Tobacco Marketing Youth Protection', '2023-05-30', '2023-08-15', 'EN', 'active', '2023-05-30 14:00:00'),
--(11, 1, 'US', 'US-FDA-2023-011', 'Tobacco Free School Zone Act', '2023-06-10', '2023-09-01', 'EN', 'active', '2023-06-10 09:30:00'),
--(12, 1, 'US', 'US-FDA-2023-012', 'E-Cigarette Device Safety Standards', '2023-06-25', '2023-09-15', 'EN', 'active', '2023-06-25 10:45:00'),
--(13, 1, 'US', 'US-FDA-2023-013', 'Tobacco Vending Machine Prohibition', '2023-07-05', '2023-10-01', 'EN', 'active', '2023-07-05 13:00:00'),
--(14, 1, 'US', 'US-FDA-2023-014', 'Tobacco Advertising Digital Media Ban', '2023-07-20', '2023-10-15', 'EN', 'active', '2023-07-20 11:15:00'),
--(15, 1, 'US', 'US-FDA-2023-015', 'Tobacco Product Testing Requirements', '2023-08-10', '2023-11-01', 'EN', 'active', '2023-08-10 09:00:00'),
--(16, 1, 'US', 'US-FDA-2023-016', 'Tobacco Age Verification System', '2023-08-25', '2023-11-15', 'EN', 'active', '2023-08-25 14:30:00'),
--(17, 1, 'US', 'US-FDA-2023-017', 'Tobacco Flavor Restriction Guidelines', '2023-09-05', '2023-12-01', 'EN', 'active', '2023-09-05 10:20:00'),
--(18, 1, 'US', 'US-FDA-2023-018', 'Tobacco Excise Tax Adjustment', '2023-09-20', '2024-01-01', 'EN', 'active', '2023-09-20 08:45:00'),
--(19, 1, 'US', 'US-FDA-2023-019', 'Tobacco Import Safety Standards', '2023-10-10', '2024-01-15', 'EN', 'active', '2023-10-10 13:30:00'),
--(20, 1, 'US', 'US-FDA-2023-020', 'Tobacco Point of Sale Display Ban', '2023-10-25', '2024-02-01', 'EN', 'active', '2023-10-25 11:00:00'),
--(21, 1, 'US', 'US-FDA-2023-021', 'Tobacco Prevention Education Mandate', '2023-11-05', '2024-02-15', 'EN', 'active', '2023-11-05 09:15:00'),
--(22, 1, 'US', 'US-FDA-2023-022', 'Tobacco Cessation Support Program', '2023-11-20', '2024-03-01', 'EN', 'active', '2023-11-20 14:00:00'),
--(23, 1, 'US', 'US-FDA-2023-023', 'Tobacco Harm Reduction Strategy', '2023-12-05', '2024-03-15', 'EN', 'active', '2023-12-05 10:30:00'),
--(24, 1, 'US', 'US-FDA-2023-024', 'Tobacco Track and Trace System', '2023-12-20', '2024-04-01', 'EN', 'active', '2023-12-20 08:00:00'),
--(25, 1, 'US', 'US-FDA-2024-001', 'Tobacco Licensing Fee Increase', '2024-01-10', '2024-04-15', 'EN', 'active', '2024-01-10 09:45:00'),
--(26, 1, 'US', 'US-FDA-2024-002', 'Tobacco Ingredient Prohibition List', '2024-01-25', '2024-05-01', 'EN', 'active', '2024-01-25 11:30:00'),
--(27, 1, 'US', 'US-FDA-2024-003', 'Tobacco Production Facility Standards', '2024-02-10', '2024-05-15', 'EN', 'active', '2024-02-10 13:15:00'),
--(28, 1, 'US', 'US-FDA-2024-004', 'Tobacco Package Size Minimum', '2024-02-25', '2024-06-01', 'EN', 'active', '2024-02-25 09:00:00'),
--(29, 1, 'US', 'US-FDA-2024-005', 'Tobacco Marketing Compliance Monitoring', '2024-03-10', '2024-06-15', 'EN', 'active', '2024-03-10 10:20:00'),
--(30, 1, 'US', 'US-FDA-2024-006', 'Tobacco Retail Location Restrictions', '2024-03-25', '2024-07-01', 'EN', 'active', '2024-03-25 14:45:00'),
--(31, 1, 'US', 'US-FDA-2024-007', 'Tobacco Smoke Exposure Prevention', '2024-04-10', '2024-07-15', 'EN', 'active', '2024-04-10 08:30:00'),
--(32, 1, 'US', 'US-FDA-2024-008', 'Tobacco Distribution License Reform', '2024-04-25', '2024-08-01', 'EN', 'active', '2024-04-25 11:00:00'),
--(33, 1, 'US', 'US-FDA-2024-009', 'Tobacco Product Emission Standards', '2024-05-10', '2024-08-15', 'EN', 'active', '2024-05-10 13:30:00'),
--(34, 1, 'US', 'US-FDA-2024-010', 'Tobacco Tax Revenue Allocation Act', '2024-05-25', '2024-09-01', 'EN', 'active', '2024-05-25 09:15:00'),
--(35, 1, 'US', 'US-FDA-2024-011', 'Tobacco Smuggling Prevention Act', '2024-06-10', '2024-09-15', 'EN', 'active', '2024-06-10 10:45:00'),
--(36, 1, 'US', 'US-FDA-2024-012', 'Tobacco Retailer Compliance Training', '2024-06-25', '2024-10-01', 'EN', 'active', '2024-06-25 14:00:00'),
--(37, 1, 'US', 'US-FDA-2024-013', 'Tobacco Import Tariff Amendment', '2024-07-10', '2024-10-15', 'EN', 'active', '2024-07-10 08:20:00'),
--(38, 1, 'US', 'US-FDA-2024-014', 'Tobacco Free Generation Act', '2024-07-25', '2024-11-01', 'EN', 'active', '2024-07-25 11:30:00'),
--(39, 1, 'US', 'US-FDA-2024-015', 'Tobacco Minimum Price Regulation', '2024-08-10', '2024-11-15', 'EN', 'active', '2024-08-10 13:45:00'),
--(40, 1, 'US', 'US-FDA-2024-016', 'Tobacco Plain Packaging Requirements', '2024-08-25', '2024-12-01', 'EN', 'active', '2024-08-25 09:30:00'),
--(41, 1, 'US', 'US-FDA-2024-017', 'Tobacco Online Sales Restriction', '2024-09-10', '2024-12-15', 'EN', 'active', '2024-09-10 10:00:00'),
--(42, 1, 'US', 'US-FDA-2024-018', 'Tobacco Health Impact Assessment', '2024-09-25', '2025-01-01', 'EN', 'active', '2024-09-25 14:15:00'),
--(43, 1, 'US', 'US-FDA-2024-019', 'Tobacco Advertising Sponsorship Ban', '2024-10-10', '2025-01-15', 'EN', 'active', '2024-10-10 08:45:00'),
--(44, 1, 'US', 'US-FDA-2024-020', 'Tobacco Product Recall Procedures', '2024-10-25', '2025-02-01', 'EN', 'active', '2024-10-25 11:20:00'),
--(45, 1, 'US', 'US-FDA-2024-021', 'Tobacco Workplace Smoking Ban', '2024-11-10', '2025-02-15', 'EN', 'active', '2024-11-10 13:00:00'),
--(46, 1, 'US', 'US-FDA-2024-022', 'Tobacco Public Place Smoking Restriction', '2024-11-25', '2025-03-01', 'EN', 'active', '2024-11-25 09:00:00'),
--(47, 1, 'US', 'US-FDA-2024-023', 'Tobacco Environmental Impact Regulation', '2024-12-10', '2025-03-15', 'EN', 'active', '2024-12-10 10:30:00'),
--(48, 1, 'US', 'US-FDA-2024-024', 'Tobacco Waste Disposal Standards', '2024-12-25', '2025-04-01', 'EN', 'active', '2024-12-25 14:45:00'),
--(49, 1, 'US', 'US-FDA-2025-001', 'Tobacco Supply Chain Transparency', '2025-01-10', '2025-04-15', 'EN', 'active', '2025-01-10 08:15:00'),
--(50, 1, 'US', 'US-FDA-2025-002', 'Tobacco Industry Reporting Requirements', '2025-01-25', '2025-05-01', 'EN', 'active', '2025-01-25 11:00:00');
--
----데이터 출처 더미데이터

--INSERT INTO data_sources (source_id, source_name, url, source_type) VALUES
--(1, 'Korea Health Authority', 'https://kohealth.or.kr', 'api'),
--(2, 'US FDA', 'https://fda.gov', 'api'),
--(3, 'Japan Tobacco Control', 'https://jtcontrol.go.jp', 'html'),
--(4, 'China Tobacco Reg', 'https://tobacco.cn', 'rss'),
--(5, 'UK Tobacco Agency', 'https://gov.uk/tobacco', 'html'),
--(6, 'Germany Health Min', 'https://gesund.bund.de', 'api'),
--(7, 'France Health Sec', 'https://sante.fr', 'rss'),
--(8, 'Australia TGA', 'https://tga.gov.au', 'api'),
--(9, 'Canada Health', 'https://hc-sc.gc.ca', 'html'),
--(10, 'Russia Tobacco Reg', 'https://rtobreg.ru', 'api');
--

--
--
---- regulation_versions 테이블 더미 데이터 (먼저 필요)
--select * from regulation_versions rv;
--INSERT INTO regulation_versions (regulation_version_id, regulation_id, version_number, original_uri, hash_value, created_at) VALUES
--(1, 1, 1, 'https://fda.gov/reg/2023/001', 'a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6', '2023-01-15 09:30:00'),
--(2, 2, 1, 'https://fda.gov/reg/2023/002', 'b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7', '2023-01-20 11:00:00');
--(3, 3, 1, 'https://fda.gov/reg/2023/003', 'c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8', '2023-02-10 11:30:00'),
--(4, 4, 1, 'https://fda.gov/reg/2023/004', 'd4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9', '2023-02-25 15:00:00'),
--(5, 5, 1, 'https://fda.gov/reg/2023/005', 'e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0', '2023-03-05 09:45:00'),
--(6, 6, 1, 'https://fda.gov/reg/2023/006', 'f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1', '2023-03-20 10:30:00'),
--(7, 7, 1, 'https://fda.gov/reg/2023/007', 'g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2', '2023-04-10 14:15:00'),
--(8, 8, 1, 'https://fda.gov/reg/2023/008', 'h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3', '2023-04-25 09:00:00'),
--(9, 9, 1, 'https://fda.gov/reg/2023/009', 'i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4', '2023-05-15 11:50:00'),
--(10, 10, 1, 'https://fda.gov/reg/2023/010', 'j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5', '2023-05-30 14:30:00'),
--(11, 11, 1, 'https://fda.gov/reg/2023/011', 'k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6', '2023-06-10 10:00:00'),
--(12, 12, 1, 'https://fda.gov/reg/2023/012', 'l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7', '2023-06-25 11:15:00'),
--(13, 13, 1, 'https://fda.gov/reg/2023/013', 'm3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8', '2023-07-05 13:30:00'),
--(14, 14, 1, 'https://fda.gov/reg/2023/014', 'n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9', '2023-07-20 11:45:00'),
--(15, 15, 1, 'https://fda.gov/reg/2023/015', 'o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0', '2023-08-10 09:30:00'),
--(16, 16, 1, 'https://fda.gov/reg/2023/016', 'p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0e1', '2023-08-25 15:00:00'),
--(17, 17, 1, 'https://fda.gov/reg/2023/017', 'q7r8s9t0u1v2w3x4y5z6a7b8c9d0e1f2', '2023-09-05 10:50:00'),
--(18, 18, 1, 'https://fda.gov/reg/2023/018', 'r8s9t0u1v2w3x4y5z6a7b8c9d0e1f2g3', '2023-09-20 09:15:00'),
--(19, 19, 1, 'https://fda.gov/reg/2023/019', 's9t0u1v2w3x4y5z6a7b8c9d0e1f2g3h4', '2023-10-10 14:00:00'),
--(20, 20, 1, 'https://fda.gov/reg/2023/020', 't0u1v2w3x4y5z6a7b8c9d0e1f2g3h4i5', '2023-10-25 11:30:00'),
--(21, 21, 1, 'https://fda.gov/reg/2023/021', 'u1v2w3x4y5z6a7b8c9d0e1f2g3h4i5j6', '2023-11-05 09:45:00'),
--(22, 22, 1, 'https://fda.gov/reg/2023/022', 'v2w3x4y5z6a7b8c9d0e1f2g3h4i5j6k7', '2023-11-20 14:30:00'),
--(23, 23, 1, 'https://fda.gov/reg/2023/023', 'w3x4y5z6a7b8c9d0e1f2g3h4i5j6k7l8', '2023-12-05 11:00:00'),
--(24, 24, 1, 'https://fda.gov/reg/2023/024', 'x4y5z6a7b8c9d0e1f2g3h4i5j6k7l8m9', '2023-12-20 08:30:00'),
--(25, 25, 1, 'https://fda.gov/reg/2024/001', 'y5z6a7b8c9d0e1f2g3h4i5j6k7l8m9n0', '2024-01-10 10:15:00'),
--(26, 26, 1, 'https://fda.gov/reg/2024/002', 'z6a7b8c9d0e1f2g3h4i5j6k7l8m9n0o1', '2024-01-25 12:00:00'),
--(27, 27, 1, 'https://fda.gov/reg/2024/003', 'a7b8c9d0e1f2g3h4i5j6k7l8m9n0o1p2', '2024-02-10 13:45:00'),
--(28, 28, 1, 'https://fda.gov/reg/2024/004', 'b8c9d0e1f2g3h4i5j6k7l8m9n0o1p2q3', '2024-02-25 09:30:00'),
--(29, 29, 1, 'https://fda.gov/reg/2024/005', 'c9d0e1f2g3h4i5j6k7l8m9n0o1p2q3r4', '2024-03-10 10:50:00'),
--(30, 30, 1, 'https://fda.gov/reg/2024/006', 'd0e1f2g3h4i5j6k7l8m9n0o1p2q3r4s5', '2024-03-25 15:15:00'),
--(31, 31, 1, 'https://fda.gov/reg/2024/007', 'e1f2g3h4i5j6k7l8m9n0o1p2q3r4s5t6', '2024-04-10 09:00:00'),
--(32, 32, 1, 'https://fda.gov/reg/2024/008', 'f2g3h4i5j6k7l8m9n0o1p2q3r4s5t6u7', '2024-04-25 11:30:00'),
--(33, 33, 1, 'https://fda.gov/reg/2024/009', 'g3h4i5j6k7l8m9n0o1p2q3r4s5t6u7v8', '2024-05-10 14:00:00'),
--(34, 34, 1, 'https://fda.gov/reg/2024/010', 'h4i5j6k7l8m9n0o1p2q3r4s5t6u7v8w9', '2024-05-25 09:45:00'),
--(35, 35, 1, 'https://fda.gov/reg/2024/011', 'i5j6k7l8m9n0o1p2q3r4s5t6u7v8w9x0', '2024-06-10 11:15:00'),
--(36, 36, 1, 'https://fda.gov/reg/2024/012', 'j6k7l8m9n0o1p2q3r4s5t6u7v8w9x0y1', '2024-06-25 14:30:00'),
--(37, 37, 1, 'https://fda.gov/reg/2024/013', 'k7l8m9n0o1p2q3r4s5t6u7v8w9x0y1z2', '2024-07-10 08:50:00'),
--(38, 38, 1, 'https://fda.gov/reg/2024/014', 'l8m9n0o1p2q3r4s5t6u7v8w9x0y1z2a3', '2024-07-25 12:00:00'),
--(39, 39, 1, 'https://fda.gov/reg/2024/015', 'm9n0o1p2q3r4s5t6u7v8w9x0y1z2a3b4', '2024-08-10 14:15:00'),
--(40, 40, 1, 'https://fda.gov/reg/2024/016', 'n0o1p2q3r4s5t6u7v8w9x0y1z2a3b4c5', '2024-08-25 10:00:00'),
--(41, 41, 1, 'https://fda.gov/reg/2024/017', 'o1p2q3r4s5t6u7v8w9x0y1z2a3b4c5d6', '2024-09-10 10:30:00'),
--(42, 42, 1, 'https://fda.gov/reg/2024/018', 'p2q3r4s5t6u7v8w9x0y1z2a3b4c5d6e7', '2024-09-25 14:45:00'),
--(43, 43, 1, 'https://fda.gov/reg/2024/019', 'q3r4s5t6u7v8w9x0y1z2a3b4c5d6e7f8', '2024-10-10 09:15:00'),
--(44, 44, 1, 'https://fda.gov/reg/2024/020', 'r4s5t6u7v8w9x0y1z2a3b4c5d6e7f8g9', '2024-10-25 11:50:00'),
--(45, 45, 1, 'https://fda.gov/reg/2024/021', 's5t6u7v8w9x0y1z2a3b4c5d6e7f8g9h0', '2024-11-10 13:30:00'),
--(46, 46, 1, 'https://fda.gov/reg/2024/022', 't6u7v8w9x0y1z2a3b4c5d6e7f8g9h0i1', '2024-11-25 09:30:00'),
--(47, 47, 1, 'https://fda.gov/reg/2024/023', 'u7v8w9x0y1z2a3b4c5d6e7f8g9h0i1j2', '2024-12-10 11:00:00'),
--(48, 48, 1, 'https://fda.gov/reg/2024/024', 'v8w9x0y1z2a3b4c5d6e7f8g9h0i1j2k3', '2024-12-25 15:15:00'),
--(49, 49, 1, 'https://fda.gov/reg/2025/001', 'w9x0y1z2a3b4c5d6e7f8g9h0i1j2k3l4', '2025-01-10 08:45:00'),
--(50, 50, 1, 'https://fda.gov/reg/2025/002', 'x0y1z2a3b4c5d6e7f8g9h0i1j2k3l4m5', '2025-01-25 11:30:00');
--
---- regulation_translations 테이블 더미 데이터 (영어 원문)
--INSERT INTO regulation_translations (translation_id, regulation_version_id, language_code, translated_text, glossary_term_id, translation_status, created_at) VALUES
--(1, 1, 'EN', 'This regulation prohibits the sale of flavored tobacco products including fruit, candy, and dessert flavors. Menthol and tobacco flavors are temporarily exempt. Manufacturers must reformulate products within 90 days.', NULL, 'completed', '2023-01-15 10:00:00'),
--(2, 2, 'EN', 'Menthol cigarettes are prohibited from manufacture, distribution, and sale in all states. Existing inventory must be disposed of by the effective date. Retailers face penalties of up to $10,000 per violation.', NULL, 'completed', '2023-01-20 11:30:00'),
--(3, 3, 'EN', 'E-cigarette marketing must not target youth through social media, influencers, or cartoon characters. All advertisements require FDA pre-approval. Digital marketing must include age verification gates.', NULL, 'completed', '2023-02-10 12:00:00'),
--(4, 4, 'EN', 'Tobacco manufacturers must disclose all product ingredients including nicotine content, additives, and flavorings. Quarterly reports are required. Non-compliance results in product recall.', NULL, 'completed', '2023-02-25 15:30:00'),
--(5, 5, 'EN', 'Nicotine content in all tobacco products must not exceed 0.5mg per gram. Products exceeding this limit will be removed from market. Testing protocols must follow FDA guidelines.', NULL, 'completed', '2023-03-05 10:00:00'),
--(6, 6, 'EN', 'Updated health warnings must cover 50% of front and back package surfaces. Warnings must include graphic images depicting health consequences. Implementation deadline is 180 days.', NULL, 'completed', '2023-03-20 10:45:00'),
--(7, 7, 'EN', 'Retailers must implement strict age verification for all tobacco purchases. Photo ID is required for customers appearing under 27. Electronic verification systems are mandatory for high-volume retailers.', NULL, 'completed', '2023-04-10 14:30:00'),
--(8, 8, 'EN', 'All tobacco retailers must register with FDA annually. Registration fee is $500. Failure to register results in inability to sell tobacco products and potential fines.', NULL, 'completed', '2023-04-25 09:15:00'),
--(9, 9, 'EN', 'Heated tobacco products must meet emission standards for carbon monoxide, formaldehyde, and other toxicants. Independent laboratory testing is required before market entry.', NULL, 'completed', '2023-05-15 12:00:00'),
--(10, 10, 'EN', 'Tobacco marketing materials within 1000 feet of schools and playgrounds are prohibited. Online advertisements must not appear on websites with more than 15% youth audience.', NULL, 'completed', '2023-05-30 14:45:00'),
--(11, 11, 'EN', 'Tobacco use and sales are prohibited within 500 feet of school property. Designated smoking areas must be established beyond this zone. Schools must post visible signage.', NULL, 'completed', '2023-06-10 10:15:00'),
--(12, 12, 'EN', 'E-cigarette devices must have child-resistant packaging, tamper-evident features, and leak-proof design. Battery safety standards apply to all rechargeable devices.', NULL, 'completed', '2023-06-25 11:30:00'),
--(13, 13, 'EN', 'Tobacco vending machines are prohibited in all public and private locations. Existing machines must be removed within 60 days. Violations carry $5,000 penalties.', NULL, 'completed', '2023-07-05 13:45:00'),
--(14, 14, 'EN', 'Tobacco advertising on digital media platforms including social media, streaming services, and mobile apps is prohibited. Native advertising and sponsored content are also banned.', NULL, 'completed', '2023-07-20 12:00:00'),
--(15, 15, 'EN', 'All tobacco products must undergo testing for tar, nicotine, and carbon monoxide levels. Test results must be submitted quarterly. Products failing tests will be recalled.', NULL, 'completed', '2023-08-10 09:45:00'),
--(16, 16, 'EN', 'Retailers must implement electronic age verification systems that scan and verify government-issued IDs. Manual verification is not sufficient for compliance.', NULL, 'completed', '2023-08-25 15:15:00'),
--(17, 17, 'EN', 'Guidance on flavor restrictions clarifies that characterizing flavors other than tobacco and menthol are prohibited. Natural and artificial flavoring agents are both restricted.', NULL, 'completed', '2023-09-05 11:00:00'),
--(18, 18, 'EN', 'Federal excise tax on tobacco products increases by 50%. Tax applies to cigarettes, cigars, smokeless tobacco, and electronic cigarettes. Revenue funds public health programs.', NULL, 'completed', '2023-09-20 09:30:00'),
--(19, 19, 'EN', 'Imported tobacco products must meet US safety and quality standards. Certificate of compliance required at customs. Non-compliant products will be destroyed.', NULL, 'completed', '2023-10-10 14:15:00'),
--(20, 20, 'EN', 'Tobacco products may not be displayed at point of sale. Products must be stored out of customer view in closed cabinets. Retailers may only show approved text lists.', NULL, 'completed', '2023-10-25 11:45:00'),
--(21, 21, 'EN', 'Tobacco prevention education must be included in health curricula for grades 6-12. Programs must address addiction, health effects, and industry marketing tactics.', NULL, 'completed', '2023-11-05 10:00:00'),
--(22, 22, 'EN', 'Free tobacco cessation support including counseling and medication is available to all smokers. Programs covered by federal and state health insurance.', NULL, 'completed', '2023-11-20 14:45:00'),
--(23, 23, 'EN', 'Comprehensive strategy to reduce tobacco harm through promoting cessation, preventing youth initiation, and supporting alternatives to combustible products.', NULL, 'completed', '2023-12-05 11:15:00'),
--(24, 24, 'EN', 'Track and trace system for tobacco products requires unique identifiers on all packages. System enables tracking from manufacture to retail to prevent illicit trade.', NULL, 'completed', '2023-12-20 08:45:00'),
--(25, 25, 'EN', 'Annual tobacco retail license fee increases from $500 to $1,000. Fee supports enforcement activities and tobacco prevention programs.', NULL, 'completed', '2024-01-10 10:30:00'),
--(26, 26, 'EN', 'Prohibited ingredients in tobacco products include vitamins, caffeine, coloring agents that mask health effects, and additives that enhance addictiveness.', NULL, 'completed', '2024-01-25 12:15:00'),
--(27, 27, 'EN', 'Tobacco production facilities must meet GMP standards including quality control, employee training, and contamination prevention. Annual inspections required.', NULL, 'completed', '2024-02-10 14:00:00'),
--(28, 28, 'EN', 'Minimum package size for cigarettes is 20 units. Smaller packages that appear more affordable to youth are prohibited.', NULL, 'completed', '2024-02-25 09:45:00'),
--(29, 29, 'EN', 'Enhanced monitoring of tobacco marketing compliance through social media surveillance and retailer audits. Violations reported publicly.', NULL, 'completed', '2024-03-10 11:00:00'),
--(30, 30, 'EN', 'Tobacco retailers must be located at least 500 feet from schools and 300 feet from playgrounds. Existing retailers within these zones are grandfathered.', NULL, 'completed', '2024-03-25 15:30:00'),
--(31, 31, 'EN', 'Secondhand smoke exposure prevention extends smoke-free requirements to outdoor dining areas, bus stops, and building entrances within 25 feet.', NULL, 'completed', '2024-04-10 09:15:00'),
--(32, 32, 'EN', 'Reformed tobacco distribution licensing requires background checks, compliance training, and bonding. License renewal is every two years.', NULL, 'completed', '2024-04-25 11:45:00'),
--(33, 33, 'EN', 'Tobacco products must meet emission standards limiting harmful constituents including ammonia, arsenic, benzene, and formaldehyde.', NULL, 'completed', '2024-05-10 14:15:00'),
--(34, 34, 'EN', 'Tobacco tax revenue allocation designates 60% to healthcare, 25% to prevention programs, and 15% to enforcement activities.', NULL, 'completed', '2024-05-25 10:00:00'),
--(35, 35, 'EN', 'Comprehensive tobacco smuggling prevention through border monitoring, retailer compliance checks, and tax stamp verification programs.', NULL, 'completed', '2024-06-10 11:30:00'),
--(36, 36, 'EN', 'Mandatory compliance training for all tobacco retail employees covering age verification, product regulations, and penalty structures.', NULL, 'completed', '2024-06-25 14:45:00'),
--(37, 37, 'EN', 'Import tariff adjustment increases duties on tobacco products by 30% to discourage consumption and protect domestic health interests.', NULL, 'completed', '2024-07-10 09:00:00'),
--(38, 38, 'EN', 'Tobacco-free generation legislation prohibits sale of tobacco products to anyone born after January 1, 2010, creating a smoke-free generation.', NULL, 'completed', '2024-07-25 12:15:00'),
--(39, 39, 'EN', 'Minimum price regulation sets floor price for tobacco products to prevent predatory pricing that targets low-income communities.', NULL, 'completed', '2024-08-10 14:30:00'),
--(40, 40, 'EN', 'Plain packaging requirements mandate standardized packaging with no brand imagery, only text in standard font and color.', NULL, 'completed', '2024-08-25 10:15:00'),
--(41, 41, 'EN', 'Online tobacco sales are restricted to licensed retailers only. Age verification and delivery signature requirements apply to all shipments.', NULL, 'completed', '2024-09-10 10:45:00'),
--(42, 42, 'EN', 'Health impact assessment required for all new tobacco products before market authorization. Assessment must evaluate population-level effects.', NULL, 'completed', '2024-09-25 15:00:00'),
--(43, 43, 'EN', 'Tobacco advertising sponsorship of sports, entertainment, and cultural events is prohibited to eliminate brand visibility.', NULL, 'completed', '2024-10-10 09:30:00'),
--(44, 44, 'EN', 'Standardized procedures for tobacco product recalls including consumer notification, inventory tracking, and disposal protocols.', NULL, 'completed', '2024-10-25 12:00:00'),
--(45, 45, 'EN', 'Workplace smoking ban extends to all indoor and outdoor areas of employment facilities including parking lots and outdoor break areas.', NULL, 'completed', '2024-11-10 13:45:00'),
--(46, 46, 'EN', 'Public place smoking restrictions prohibit tobacco use in parks, beaches, outdoor stadiums, and public transportation facilities.', NULL, 'completed', '2024-11-25 09:45:00'),
--(47, 47, 'EN', 'Environmental impact regulations address tobacco product waste including cigarette butt litter prevention and disposal requirements.', NULL, 'completed', '2024-12-10 11:15:00'),
--(48, 48, 'EN', 'Tobacco waste disposal standards require proper handling of manufacturing waste, recalled products, and expired inventory.', NULL, 'completed', '2024-12-25 15:30:00'),
--(49, 49, 'EN', 'Supply chain transparency requirements mandate disclosure of tobacco sourcing, processing facilities, and distribution channels.', NULL, 'completed', '2025-01-10 09:00:00'),
--(50, 50, 'EN', 'Industry reporting requirements include quarterly sales data, marketing expenditures, and product distribution information.', NULL, 'completed', '2025-01-25 11:45:00');
--
--select * from regulation_translations rt ;
---- regulation_translations 테이블 더미 데이터 (한국어 번역)
--INSERT INTO regulation_translations (translation_id, regulation_version_id, language_code, translated_text, glossary_term_id, translation_status, created_at) VALUES
--(51, 1, 'KO', '이 규정은 과일, 사탕, 디저트 향을 포함한 가향 담배 제품의 판매를 금지합니다. 멘톨과 담배 향은 일시적으로 면제됩니다. 제조업체는 90일 이내에 제품을 재구성해야 합니다.', NULL, 'completed', '2023-01-15 10:30:00'),
--(52, 2, 'KO', '멘톨 담배는 모든 주에서 제조, 유통 및 판매가 금지됩니다. 기존 재고는 시행일까지 폐기해야 합니다. 소매업자는 위반 시 최대 $10,000의 벌금이 부과됩니다.', NULL, 'completed', '2023-01-20 12:00:00'),
--(53, 3, 'KO', '전자담배 마케팅은 소셜 미디어, 인플루언서 또는 만화 캐릭터를 통해 청소년을 타겟팅해서는 안 됩니다. 모든 광고는 FDA 사전 승인이 필요합니다. 디지털 마케팅에는 연령 확인 게이트가 포함되어야 합니다.', NULL, 'completed', '2023-02-10 12:30:00'),
--(54, 4, 'KO', '담배 제조업체는 니코틴 함량, 첨가제 및 향료를 포함한 모든 제품 성분을 공개해야 합니다. 분기별 보고가 필요합니다. 미준수 시 제품 리콜이 발생합니다.', NULL, 'completed', '2023-02-25 16:00:00'),
--(55, 5, 'KO', '모든 담배 제품의 니코틴 함량은 그램당 0.5mg을 초과해서는 안 됩니다. 이 한도를 초과하는 제품은 시장에서 제거됩니다. 테스트 프로토콜은 FDA 지침을 따라야 합니다.', NULL, 'completed', '2023-03-05 10:30:00'),
--(56, 6, 'KO', '업데이트된 건강 경고는 패키지 전면과 후면의 50%를 차지해야 합니다. 경고에는 건강 결과를 묘사하는 그래픽 이미지가 포함되어야 합니다. 시행 마감일은 180일입니다.', NULL, 'completed', '2023-03-20 11:15:00'),
--(57, 7, 'KO', '소매업자는 모든 담배 구매에 대해 엄격한 연령 확인을 시행해야 합니다. 27세 미만으로 보이는 고객에게는 사진이 있는 신분증이 필요합니다. 대량 판매 소매업자에게는 전자 확인 시스템이 필수입니다.', NULL, 'completed', '2023-04-10 15:00:00'),
--(58, 8, 'KO', '모든 담배 소매업자는 매년 FDA에 등록해야 합니다. 등록 수수료는 $500입니다. 등록하지 않으면 담배 제품을 판매할 수 없으며 벌금이 부과될 수 있습니다.', NULL, 'completed', '2023-04-25 09:45:00'),
--(59, 9, 'KO', '가열식 담배 제품은 일산화탄소, 포름알데히드 및 기타 독성 물질에 대한 배출 기준을 충족해야 합니다. 시장 진입 전 독립 실험실 테스트가 필요합니다.', NULL, 'completed', '2023-05-15 12:30:00'),
--(60, 10, 'KO', '학교 및 놀이터 1000피트 이내의 담배 마케팅 자료는 금지됩니다. 온라인 광고는 청소년 관객이 15% 이상인 웹사이트에 표시되어서는 안 됩니다.', NULL, 'completed', '2023-05-30 15:15:00'),
--(61, 11, 'KO', '학교 부지 500피트 이내에서는 담배 사용 및 판매가 금지됩니다. 지정된 흡연 구역은 이 구역 외부에 설정되어야 합니다. 학교는 눈에 잘 띄는 표지판을 게시해야 합니다.', NULL, 'completed', '2023-06-10 10:45:00'),
--(62, 12, 'KO', '전자담배 장치는 어린이 보호 포장, 변조 방지 기능 및 누출 방지 설계를 갖추어야 합니다. 배터리 안전 기준은 모든 충전식 장치에 적용됩니다.', NULL, 'completed', '2023-06-25 12:00:00'),
--(63, 13, 'KO', '담배 자동판매기는 모든 공공 및 개인 장소에서 금지됩니다. 기존 기계는 60일 이내에 제거되어야 합니다. 위반 시 $5,000의 벌금이 부과됩니다.', NULL, 'completed', '2023-07-05 14:15:00'),
--(64, 14, 'KO', '소셜 미디어, 스트리밍 서비스 및 모바일 앱을 포함한 디지털 미디어 플랫폼에서의 담배 광고는 금지됩니다. 네이티브 광고와 스폰서 콘텐츠도 금지됩니다.', NULL, 'completed', '2023-07-20 12:30:00'),
--(65, 15, 'KO', '모든 담배 제품은 타르, 니코틴 및 일산화탄소 수준에 대한 테스트를 받아야 합니다. 테스트 결과는 분기별로 제출되어야 합니다. 테스트에 실패한 제품은 리콜됩니다.', NULL, 'completed', '2023-08-10 10:15:00'),
--(66, 16, 'KO', '소매업자는 정부 발행 신분증을 스캔하고 확인하는 전자 연령 확인 시스템을 구현해야 합니다. 수동 확인은 규정 준수에 충분하지 않습니다.', NULL, 'completed', '2023-08-25 15:45:00'),
--(67, 17, 'KO', '향료 제한에 대한 지침은 담배와 멘톨 이외의 특성 향이 금지됨을 명확히 합니다. 천연 및 인공 향료 모두 제한됩니다.', NULL, 'completed', '2023-09-05 11:30:00'),
--(68, 18, 'KO', '담배 제품에 대한 연방 소비세가 50% 증가합니다. 세금은 담배, 시가, 무연 담배 및 전자 담배에 적용됩니다. 수익은 공중 보건 프로그램에 사용됩니다.', NULL, 'completed', '2023-09-20 10:00:00'),
--(69, 19, 'KO', '수입 담배 제품은 미국 안전 및 품질 기준을 충족해야 합니다. 세관에서 적합성 인증서가 필요합니다. 미준수 제품은 폐기됩니다.', NULL, 'completed', '2023-10-10 14:45:00'),
--(70, 20, 'KO', '담배 제품은 판매 시점에 진열할 수 없습니다. 제품은 고객 시야에서 벗어나 폐쇄된 캐비닛에 보관되어야 합니다. 소매업자는 승인된 텍스트 목록만 표시할 수 있습니다.', NULL, 'completed', '2023-10-25 12:15:00'),
--(71, 21, 'KO', '담배 예방 교육은 6-12학년 건강 커리큘럼에 포함되어야 합니다. 프로그램은 중독, 건강 영향 및 업계 마케팅 전술을 다루어야 합니다.', NULL, 'completed', '2023-11-05 10:30:00'),
--(72, 22, 'KO', '상담 및 약물을 포함한 무료 금연 지원이 모든 흡연자에게 제공됩니다. 프로그램은 연방 및 주 건강 보험으로 보장됩니다.', NULL, 'completed', '2023-11-20 15:15:00'),
--(73, 23, 'KO', '금연 촉진, 청소년 시작 예방, 가연성 제품에 대한 대안 지원을 통해 담배 피해를 줄이기 위한 포괄적 전략입니다.', NULL, 'completed', '2023-12-05 11:45:00'),
--(74, 24, 'KO', '담배 제품에 대한 추적 시스템은 모든 패키지에 고유 식별자를 요구합니다. 시스템은 불법 거래를 방지하기 위해 제조부터 소매까지 추적을 가능하게 합니다.', NULL, 'completed', '2023-12-20 09:15:00'),
--(75, 25, 'KO', '연간 담배 소매 라이선스 수수료가 $500에서 $1,000로 증가합니다. 수수료는 집행 활동과 담배 예방 프로그램을 지원합니다.', NULL, 'completed', '2024-01-10 11:00:00'),
--(76, 26, 'KO', '담배 제품의 금지된 성분에는 비타민, 카페인, 건강 영향을 감추는 착색제, 중독성을 강화하는 첨가제가 포함됩니다.', NULL, 'completed', '2024-01-25 12:45:00'),
--(77, 27, 'KO', '담배 생산 시설은 품질 관리, 직원 교육 및 오염 방지를 포함한 GMP 기준을 충족해야 합니다. 연간 검사가 필요합니다.', NULL, 'completed', '2024-02-10 14:30:00'),
--(78, 28, 'KO', '담배의 최소 패키지 크기는 20개입니다. 청소년에게 더 저렴해 보이는 소형 패키지는 금지됩니다.', NULL, 'completed', '2024-02-25 10:15:00'),
--(79, 29, 'KO', '소셜 미디어 감시 및 소매업자 감사를 통한 담배 마케팅 준수에 대한 강화된 모니터링. 위반 사항은 공개적으로 보고됩니다.', NULL, 'completed', '2024-03-10 11:30:00'),
--(80, 30, 'KO', '담배 소매업자는 학교에서 최소 500피트, 놀이터에서 300피트 떨어진 곳에 위치해야 합니다. 이 구역 내의 기존 소매업자는 기득권이 인정됩니다.', NULL, 'completed', '2024-03-25 16:00:00'),
--(81, 31, 'KO', '간접 흡연 노출 방지는 야외 식사 구역, 버스 정류장 및 25피트 이내의 건물 입구로 금연 요구 사항을 확대합니다.', NULL, 'completed', '2024-04-10 09:45:00'),
--(82, 32, 'KO', '개혁된 담배 유통 라이선싱은 신원 조회, 준수 교육 및 보증을 요구합니다. 라이선스 갱신은 2년마다입니다.', NULL, 'completed', '2024-04-25 12:15:00'),
--(83, 33, 'KO', '담배 제품은 암모니아, 비소, 벤젠 및 포름알데히드를 포함한 유해 성분을 제한하는 배출 기준을 충족해야 합니다.', NULL, 'completed', '2024-05-10 14:45:00'),
--(84, 34, 'KO', '담배 세수 할당은 60%를 의료, 25%를 예방 프로그램, 15%를 집행 활동에 지정합니다.', NULL, 'completed', '2024-05-25 10:30:00'),
--(85, 35, 'KO', '국경 모니터링, 소매업자 준수 점검 및 세금 스탬프 확인 프로그램을 통한 포괄적인 담배 밀수 방지입니다.', NULL, 'completed', '2024-06-10 12:00:00'),
--(86, 36, 'KO', '연령 확인, 제품 규정 및 벌금 구조를 다루는 모든 담배 소매 직원에 대한 필수 준수 교육입니다.', NULL, 'completed', '2024-06-25 15:15:00'),
--(87, 37, 'KO', '수입 관세 조정은 소비를 억제하고 국내 건강 이익을 보호하기 위해 담배 제품에 대한 관세를 30% 인상합니다.', NULL, 'completed', '2024-07-10 09:30:00'),
--(88, 38, 'KO', '담배 없는 세대 법안은 2010년 1월 1일 이후 출생한 모든 사람에게 담배 제품 판매를 금지하여 무연 세대를 만듭니다.', NULL, 'completed', '2024-07-25 12:45:00'),
--(89, 39, 'KO', '최저 가격 규정은 저소득 지역 사회를 대상으로 하는 약탈적 가격 책정을 방지하기 위해 담배 제품의 최저 가격을 설정합니다.', NULL, 'completed', '2024-08-10 15:00:00'),
--(90, 40, 'KO', '일반 포장 요구 사항은 브랜드 이미지 없이 표준 글꼴과 색상의 텍스트만 있는 표준화된 포장을 의무화합니다.', NULL, 'completed', '2024-08-25 10:45:00'),
--(91, 41, 'KO', '온라인 담배 판매는 라이선스가 있는 소매업자에게만 제한됩니다. 모든 배송에는 연령 확인 및 배송 서명 요구 사항이 적용됩니다.', NULL, 'completed', '2024-09-10 11:15:00'),
--(92, 42, 'KO', '시장 승인 전 모든 신규 담배 제품에 대한 건강 영향 평가가 필요합니다. 평가는 인구 수준 효과를 평가해야 합니다.', NULL, 'completed', '2024-09-25 15:30:00'),
--(93, 43, 'KO', '브랜드 가시성을 제거하기 위해 스포츠, 엔터테인먼트 및 문화 행사에 대한 담배 광고 스폰서십이 금지됩니다.', NULL, 'completed', '2024-10-10 10:00:00'),
--(94, 44, 'KO', '소비자 통지, 재고 추적 및 폐기 프로토콜을 포함한 담배 제품 리콜에 대한 표준화된 절차입니다.', NULL, 'completed', '2024-10-25 12:30:00'),
--(95, 45, 'KO', '직장 흡연 금지는 주차장 및 야외 휴게 구역을 포함한 고용 시설의 모든 실내 및 야외 구역으로 확대됩니다.', NULL, 'completed', '2024-11-10 14:15:00'),
--(96, 46, 'KO', '공공 장소 흡연 제한은 공원, 해변, 야외 경기장 및 대중 교통 시설에서 담배 사용을 금지합니다.', NULL, 'completed', '2024-11-25 10:15:00'),
--(97, 47, 'KO', '환경 영향 규정은 담배꽁초 쓰레기 방지 및 폐기 요구 사항을 포함한 담배 제품 폐기물을 다룹니다.', NULL, 'completed', '2024-12-10 11:45:00'),
--(98, 48, 'KO', '담배 폐기물 처리 기준은 제조 폐기물, 리콜된 제품 및 만료된 재고의 적절한 처리를 요구합니다.', NULL, 'completed', '2024-12-25 16:00:00'),
--(99, 49, 'KO', '공급망 투명성 요구 사항은 담배 소싱, 가공 시설 및 유통 채널의 공개를 의무화합니다.', NULL, 'completed', '2025-01-10 09:30:00'),
--(100, 50, 'KO', '업계 보고 요구 사항에는 분기별 판매 데이터, 마케팅 지출 및 제품 유통 정보가 포함됩니다.', NULL, 'completed', '2025-01-25 12:15:00');


--  
-- 쿼리 테스트용
--alter table products add column Revenue int;
--SELECT * FROM impact_scores WHERE translation_id IN (SELECT translation_id FROM regulation_translations WHERE regulation_version_id IN (SELECT regulation_version_id FROM regulation_versions WHERE regulation_id=?));

-- SELECT impact_scores.impact_score_id AS impact_scores_impact_score_id, impact_scores.translation_id AS impact_scores_translation_id, impact_scores.product_id AS impact_scores_product_id, impact_scores.impact_score AS impact_scores_impact_score, impact_scores.risk_level AS impact_scores_risk_level, impact_scores.evaluation_detail AS impact_scores_evaluation_detail, impact_scores.evaluated_at AS impact_scores_evaluated_at 
-- FROM impact_scores ;

-- SELECT regulation_change_keynotes.regulation_version_id AS regulation_change_keynotes_regulation_version_id, regulation_change_keynotes.keynote_id AS regulation_change_keynotes_keynote_id, regulation_change_keynotes.product_id AS regulation_change_keynotes_product_id, regulation_change_keynotes.country_code AS regulation_change_keynotes_country_code, regulation_change_keynotes.impact_score_id AS regulation_change_keynotes_impact_score_id, regulation_change_keynotes.translation_id AS regulation_change_keynotes_translation_id, regulation_change_keynotes.title AS regulation_change_keynotes_title, regulation_change_keynotes.regulation_type AS regulation_change_keynotes_regulation_type, regulation_change_keynotes.generated_at AS regulation_change_keynotes_generated_at 
-- FROM regulation_change_keynotes 
-- WHERE regulation_change_keynotes.regulation_version_id IN (1, 2);

-- SELECT regulations.regulation_id, regulations.source_id, regulations.country_code, regulations.external_id, regulations.title, regulations.proclaimed_date, regulations.effective_date, regulations.language, regulations.status, regulations.created_at 
-- FROM regulations;

-- SELECT 
--     rck.keynote_id,
--     rck.impact_score_id,
--     i.risk_level,
--     i.impact_score
-- FROM regulation_change_keynotes rck
-- LEFT JOIN impact_scores i ON rck.impact_score_id = i.impact_score_id
-- JOIN regulation_versions rv ON rck.regulation_version_id = rv.regulation_version_id
-- WHERE rv.regulation_id = 2;