spring.application.name=auth_service
spring.config.import=optional:file:../.env[.properties]

server.port=8081

# [DB 설정 복구]
spring.datasource.url=${SPRING_DB_URL}
spring.datasource.username=${SPRING_DB_USERNAME}
spring.datasource.password=${SPRING_DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# 테이블 자동 생성 (update 모드)
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Tavily & AWS
tavily.api-key=${TAVILY_API_KEY}
aws.accessKeyId=${AWS_ACCESS_KEY_ID}
aws.secretAccessKey=${AWS_SECRET_ACCESS_KEY}
aws.region=${AWS_DEFAULT_REGION}
aws.s3.target-arn=${AWS_S3_ACCESS_POINT_ARN}
aws.s3.base-prefix=${S3_BASE_PREFIX}
aws.s3.app-prefix=${S3_APP_PREFIX}

# CORS (Origin에는 경로 없이 호스트만 명시)
api.frontend-url=https://ingress.skala25a.project.skala-ai.com
api.fast-url=http://remon-api:8000

# 세션 쿠키 설정 (크로스 도메인 전송 허용)
server.servlet.session.cookie.same-site=none
server.servlet.session.cookie.secure=true
# [DB 연결 유지 설정 추가]
# 연결 최대 수명을 3분(180000ms)으로 설정 (DB 서버 타임아웃보다 짧게)
spring.datasource.hikari.max-lifetime=180000
# 유휴 상태일 때 연결이 살아있는지 확인하는 주기 (1분)
spring.datasource.hikari.keepalive-time=60000
# 연결 테스트 쿼리
spring.datasource.hikari.connection-test-query=SELECT 1
